[Yggdrasil](https://yggdrasil-network.github.io/) is a decentralized IPv6 network that offers an additional layer of privacy for peer-to-peer connections.

According to the original [README](https://github.com/yggdrasil-network/yggdrasil-go#introduction):

> Yggdrasil is an early-stage implementation of a fully end-to-end encrypted IPv6 network. It is lightweight, self-arranging, supported on multiple platforms and allows pretty much any IPv6-capable application to communicate securely with other Yggdrasil nodes. Yggdrasil does not require you to have IPv6 Internet connectivity - it also works over IPv4.

## Usage purposes

Yggdrasil can be useful in situations when you want to:
* hide your real IP address from other (twister) peers;
* bypass ISPs or global firewalls in censored areas;
* build a custom route to the VPN, I2P or Tor proxy;
* remote access to your home node over NAT;
* create a permanent IPv6 address in the `0200::/7` range (based on the private key) to set up a remote peer or firewall for whitelisting;
* run a public peer (accessible to other twister nodes connected to the Yggdrasil network) without needing a dedicated Internet IP address and port forwarding.

> [!IMPORTANT] 
> * Unlike Tor, Yggdrasil is not designed for anonymization; however, it can enhance your routing capabilities when combined with those technologies, but only when configured outside of the twister context!
> * The `twister-core` software does not provide any Yggdrasil features by itself, only IPv6 support. This means that using the Yggdrasil network with twister does not ensure that you are connectable only from this network; the application's behavior in this case requires additional audit.
> * When installing Yggdrasil, make sure your firewall is configured properly, as any service launched on `0.0.0.0` will be visible over NAT, similar to how it would be on the local network. To check which services are listening for external connections, run the command `netstat -tulpn | grep LISTEN`

## IPv6 support

If you are using `twister-core` from the [twisterarmy branch](https://github.com/twisterarmy/twister-core), no additional steps are needed, as it already has the IPv6 enabled out of the box.

However, if you are using the `twister-core` from the [miguelfreitas branch](https://github.com/miguelfreitas/twister-core), you must configure it with the option `--enable-ipv6` (see `./configure --help` for details), then rebuild `twisterd`.

## Usage examples

### Connect all peers

By launching `twisterd` without additional arguments, you will be able to connect to all network interfaces, including the Yggdrasil one.

If you don't see any connections from the `0200::/7` range yet, visit the [community website](https://twisterarmy.github.io/network#public-peers) and find any peer from the list. After that, copy its `[host]:port` into the `Force connection to peer` field on the web UI [Network page](http://127.0.0.1:28332/network.html).

> [!TIP]
> If you want to remain connectable to all networks while announcing your peer address as Yggdrasil, run `twisterd` with the `-externalip` argument:
>
> ``` bash
> ./twisterd -externalip=[HOST]
> ```
> * to get your current Yggdrasil `[HOST]`, run: `sudo yggdrasilctl getself`

### Connect specified peer only

Run `twisterd` with `-connect=[HOST]:PORT` argument, where the `HOST:PORT` is the target host you want to connect to:

``` bash
./twisterd -connect=[300:17a8:aabf:108f::33]:28333
```

> [!NOTE]
> This option disables finding peers using DNS lookup (`-dnsseed` argument will be ignored)

### Bind on given address

By launching `twisterd` with the following example, your peer will listen for connections only on this address. Internet users will no longer be able to connect to your peer using the clearnet IPv4/IPv6!

``` bash
./twisterd -bind=[HOST]:PORT
```
* to get your current Yggdrasil `[HOST]`, run: `sudo yggdrasilctl getself`

### Disable IPv4 connections

To ignore the unused IPv4 interface, use the `-onlynet=IPv6` flag:

``` bash
./twisterd -onlynet=IPv6
```

## Firewall examples

Some tips for tuning your iptables

### Restrict 0200::/7 range

``` bash
ufw allow from 0200::/7 to any port 28333
```
* where `28333` is the port you want to allow for Yggdrasil peers only

## Public peers

The twister public peers displayed on the [Network page](https://twisterarmy.github.io/network#public-peers) are manually managed to show only those that are actually online.

The following list includes all known peers from that source. Since the Yggdrasil IP address is generated by its owner's private key, it will never expire, and these addresses may come online again at any time. This could be useful when all Internet peers are offline for some reason.

| Host                      | Port, TCP | Port, UDP+TCP | Online  |
|:--------------------------|:----------|:--------------|:--------|
| [300:17a8:aabf:108f::33]  | 28333     | 29333         | 2025    |
| [301:23b4:991a:634d::33]  | 28333     | 29333         | 2023    |
| [301:5eb5:f061:678e::33]  | 28333     | 29333         | 2023    |

## See also

* [yggstack](https://github.com/yggdrasil-network/yggstack) - access Yggdrasil through SOCKS proxy without exposing your interface to the network
* [yggmail](https://github.com/neilalexander/yggmail) - end-to-end encrypted email for the mesh networking age
* [Alfis DNS](https://github.com/Revertron/Alfis/) - a peer-to-peer alternative to centralized DNS providers, with native Yggdrasil support, that is also useful for launching a free, independent DNS seeder for the twister network.